<div class="messages-container">
  @if (otherUserData$ | async; as otherUser) {
  <mat-card class="chat-container">
    <mat-card-header
      ><div mat-card-avatar class="poster-profile-picture">
        <mat-icon>person</mat-icon>
      </div>
      <mat-card-title
        ><a routerLink="/profile/{{ otherUser.id }}">{{
          otherUser.displayName
        }}</a> </mat-card-title
      ><mat-card-subtitle>{{ "@" + otherUser.username }}</mat-card-subtitle></mat-card-header
    >

    <mat-card-content>
      @for (message of messages$ | async; track message.id) {
      <div
        class="message-container"
        [ngClass]="{
          left: message.recieverUser === otherUser.id,
          right: message.recieverUser !== otherUser.id
        }"
      >
        {{ message.text }}
      </div>
      }
    </mat-card-content>
    <form [formGroup]="messageForm" class="message-form" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline">
        <textarea
          matInput
          formControlName="text"
          cdkTextareaAutosize
          cdkAutosizeMinRows="1"
          cdkAutosizeMaxRows="5"
        ></textarea>
      </mat-form-field>
      <button class="sendButton" mat-flat-button [disabled]="messageForm.value.text.length < 1">
        Send
      </button>
    </form>
  </mat-card>
  }
</div>
